(()=>{"use strict";const e=window.wp.blocks,i=JSON.parse('{"UU":"video-gallery-block/video-gallery"}'),o=window.wp.i18n,d=window.wp.blockEditor,t=window.wp.components,l=window.ReactJSXRuntime;(0,e.registerBlockType)(i.UU,{edit:({attributes:e,setAttributes:i})=>{const s=(0,d.useBlockProps)();return(0,l.jsx)("div",{...s,children:(0,l.jsxs)("div",{className:"video-gallery-editor",children:[(0,l.jsx)("h3",{children:(0,o.__)("Video Gallery","video-gallery-block")}),(0,l.jsx)(d.MediaUploadCheck,{children:(0,l.jsx)(d.MediaUpload,{onSelect:o=>{const d=o.map((e=>({url:e.url,id:e.id,title:e.title||e.filename||"Video",mime:e.mime||"video/mp4"})));i({videos:[...e.videos||[],...d]})},allowedTypes:["video"],multiple:!0,value:"",render:({open:e})=>(0,l.jsx)(t.Button,{onClick:e,isPrimary:!0,style:{marginBottom:"15px"},children:(0,o.__)("Add Videos","video-gallery-block")})})}),e.videos&&0===e.videos.length&&(0,l.jsx)(t.Notice,{status:"info",isDismissible:!1,children:(0,o.__)("Drag and drop videos or click the Add Videos button to get started.","video-gallery-block")}),(0,l.jsx)("div",{className:"video-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"20px",marginTop:"20px"},children:e.videos&&e.videos.map((d=>{return(0,l.jsxs)("div",{className:"video-item",style:{position:"relative",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden"},children:[(0,l.jsx)(t.Button,{onClick:()=>{return o=d.id,void i({videos:e.videos.filter((e=>e.id!==o))});var o},className:"remove-video-button",style:{position:"absolute",top:"5px",right:"5px",backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"50%",padding:"2px",minWidth:"24px",height:"24px",zIndex:"10",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"14px",fontWeight:"bold"},"aria-label":(0,o.__)("Remove video","video-gallery-block"),children:"Ã—"}),(0,l.jsx)("div",{className:"video-wrapper",style:{position:"relative"},children:(0,l.jsxs)("video",{controls:!0,style:{width:"100%",height:"150px",objectFit:"cover"},children:[(0,l.jsx)("source",{src:d.url,type:d.mime||(s=d.url,s&&{mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",mov:"video/quicktime",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",flv:"video/x-flv","3gp":"video/3gpp",mkv:"video/x-matroska"}[s.split(".").pop().toLowerCase()]||"video/mp4")}),(0,o.__)("Your browser does not support the video tag.","video-gallery-block")]})}),(0,l.jsx)("div",{className:"video-title",style:{padding:"10px",backgroundColor:"#f7f7f7",fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.title||"Video"})]},d.id);var s}))})]})})},save:({attributes:e})=>{const i=d.useBlockProps.save({className:"video-gallery-block-container",style:{display:"flex",justifyContent:"center",width:"100%"}}),o=e.videos?e.videos.length:0;return(0,l.jsx)("div",{...i,children:(0,l.jsx)("div",{className:"video-gallery-grid",style:{display:"grid",gridTemplateColumns:(t=o,t<=1?"repeat(1, 1fr)":2===t?"repeat(2, 1fr)":3===t?"repeat(3, 1fr)":"repeat(4, 1fr)"),gap:"20px",maxWidth:"1200px",width:"100%"},children:e.videos&&e.videos.map(((e,i)=>{return(0,l.jsx)("div",{className:"video-gallery-item",style:{border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},"data-video-id":e.id,"data-video-title":e.title||"",children:(0,l.jsx)("div",{className:"video-wrapper",style:{position:"relative"},children:(0,l.jsxs)("video",{preload:"metadata",muted:!0,playsinline:!0,style:{width:"100%",height:"auto",display:"block"},children:[(0,l.jsx)("source",{src:e.url,type:e.mime||(o=e.url,o&&{mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",mov:"video/quicktime",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",flv:"video/x-flv","3gp":"video/3gpp",mkv:"video/x-matroska"}[o.split(".").pop().toLowerCase()]||"video/mp4")}),"Your browser does not support the video tag."]})})},i);var o}))})});var t}})})();